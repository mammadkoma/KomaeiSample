@page "/Sliders"
@layout PanelLayout
<PageHeader Title="اسلاید صفحه خانه" Icon="@Icons.Material.Filled.LocalShipping" />

<MudFab Color="Color.Primary" StartIcon="@Icons.Material.Filled.Add" Size="Size.Small" Class="mb-2" OnClick="() => OpenAddDialog(null)" title="افزودن تصویر جدید" />
@if (SliderDtos.Length > 0)
{
    <MudDataGrid Items="SliderDtos" SortMode="SortMode.None" Bordered Hover Dense Striped Elevation="4">
        <Columns>
            <PropertyColumn Property="x => x.Id" Hidden />
            <TemplateColumn T="SliderDto" Title="حذف">
                <CellTemplate Context="context">
                    <div class="d-flex align-center justify-center" style="height:100%;">
                        <MudFab Color="Color.Error" StartIcon="@Icons.Material.Filled.Delete" Size="Size.Small" Class="mx-2" OnClick="() => DeleteRow(context.Item)" Title="حذف تصویر" />
                    </div>
                </CellTemplate>
            </TemplateColumn>
            <TemplateColumn T="SliderDto" Title="ترتیب نمایش">
                <CellTemplate Context="context">
                    <MudStack Row Justify="Justify.Center">
                        @if (context.Item.Order != SliderDtos.Max(x => x.Order))
                        {
                            <MudFab Color="Color.Info" StartIcon="@Icons.Material.Filled.ArrowDownward" Size="Size.Small" Class="mx-2" OnClick="() => GoDown(context.Item.Id)" />
                        }
                        @if (context.Item.Order != SliderDtos.Min(x => x.Order))
                        {
                            <MudFab Color="Color.Tertiary" StartIcon="@Icons.Material.Filled.ArrowUpward" Size="Size.Small" Class="mx-2" OnClick="() => GoUp(context.Item.Id)" />
                        }
                    </MudStack>
                </CellTemplate>
            </TemplateColumn>
            <TemplateColumn Title="تصویر">
                <CellTemplate Context="context">
                    <MudImage Src="@("Uploads/Slider/" + context.Item.FileName)" Class="rounded" Fluid Style="max-width:250px" />
                </CellTemplate>
            </TemplateColumn>
        </Columns>
    </MudDataGrid>
}