@page "/ProductAdd"

<MudDialog DefaultFocus="DefaultFocus.FirstChild">
    <DialogContent>
@*         <EditForm Model="vm" OnValidSubmit="OnValidSubmit">
            <DataAnnotationsValidator />
            <ValidationSummary />

            <MudGrid>
                <MudItem xs="12" sm="6">
                    <MudSelect T="int" Label="دسته *" @bind-Value="vm.CategoryId" For="@(() => vm.CategoryId)" Variant="Variant.Outlined">
                        @foreach (var item in categories!)
                        {
                            <MudSelectItem Value="@item.Id">@item.Title</MudSelectItem>
                        }
                    </MudSelect>
                </MudItem>

                <MudItem xs="12" sm="6">
                    <MudTextField Label="عنوان *"
                                  @bind-Value="vm.Title"
                                  For="@(() => vm.Title)"
                                  Variant="Variant.Outlined" />
                </MudItem>

                <MudItem xs="12" sm="6">
                    <MudNumericField T="decimal"
                                     Label="قیمت (ریال)"
                                     @bind-Value="vm.Price"
                                     For="@(() => vm.Price)"
                                     Min="1"
                                     Format="N0"
                                     Variant="Variant.Outlined"
                                     dir="ltr"
                                     HideSpinButtons />
                </MudItem>

                <MudItem xs="12" sm="6">
                    <MudFileUpload T="IBrowserFile"
                                   @bind-Files="vm.File"
                                   For="@(() => vm.File)"
                                   SuppressOnChangeWhenInvalid
                                   Accept=".png,.jpg,.jpeg">
                        <ActivatorContent>
                            <MudButton Variant="Variant.Filled" Color="Color.Default" StartIcon="@Icons.Material.Filled.CloudUpload" FullWidth Class="mt-3">
                                انتخاب تصویر محصول (حداکثر 300 KB)
                            </MudButton>
                        </ActivatorContent>
                    </MudFileUpload>
                </MudItem>
            </MudGrid>

            <MudDivider Class="my-4" />

            <MudGrid Justify="Justify.Center">
                <MudButton Color="Color.Success" Variant="Variant.Filled" ButtonType="ButtonType.Submit" Class="mx-2" Style="width:120px">
                    ذخیره
                </MudButton>
            </MudGrid>
        </EditForm>
 *@    </DialogContent>
</MudDialog>


@* <MudDialog DefaultFocus="DefaultFocus.FirstChild">
    <DialogContent>
        <MudForm @ref="form" Model="vm" Class="col-md-8 mx-auto">
            <MudGrid Justify="Justify.Center">
                <MudItem>
                    <MudFileUpload T="IBrowserFile" @bind-Files="vm.File" For="@(() => vm.File)" SuppressOnChangeWhenInvalid Accept=".jpg,.jpeg" OnFilesChanged="OnFilesChanged">
                        <ActivatorContent>
                            <MudButton Variant="Variant.Filled" Color="Color.Default" StartIcon="@Icons.Material.Filled.CloudUpload" FullWidth Class="mt-3">
                                انتخاب تصویر (حداکثر 300 KB با فرمت jpg)
                            </MudButton>
                        </ActivatorContent>
                    </MudFileUpload>
                    @if (previewImageUrl.IsNullOrEmpty() == false)
                    {
                        <div class="mud-grid justify-center">
                            <MudImage Src="@previewImageUrl" Fluid Class="mt-2 rounded" />
                        </div>
                    }
                    <MudGrid Justify="Justify.Center" Class="mt-1">
                        <MudButton OnClick="Submit" Variant="Variant.Filled" Class="w-50 mt-5 mb-3"
                                   Color="Color.Success" FullWidth="true" Size="Size.Large" Disabled="vm.File==null">
                            ذخیره
                        </MudButton>
                    </MudGrid>
                </MudItem>
            </MudGrid>
        </MudForm>
    </DialogContent>
</MudDialog> *@